<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>CellarCount 2026</title>
<style>
body{font-family:Arial;margin:20px}
table{border-collapse:collapse;width:100%}
th,td{border:1px solid #ccc;padding:6px}
th{background:#eee}
.label{border:1px solid #000;padding:8px;margin:6px;display:inline-block;width:260px}
</style>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>
<body>

<h1>üç∑ CellarCount 2026</h1>

<input type="file" id="fileInput">
<button onclick="importCSV()">Import√©r CSV</button>

<div id="labels"></div>

<script>
let wines = JSON.parse(localStorage.getItem("cellarcount2026")||"[]");

function importCSV(){
 const file=document.getElementById("fileInput").files[0];
 if(!file) return alert("V√¶lg fil");
 const reader=new FileReader();
 reader.onload=e=>{
  const rows=e.target.result.split(/\r?\n/).slice(1);
  rows.forEach(r=>{
   const c=r.split(";");
   if(c.length<9) return;
   wines.push({
    vinId:c[0],name:c[1],type:c[2],country:c[3],region:c[4],
    reol:c[5],hylde:c[6],qty:Number(c[7]),price:Number(c[8])
   });
  });
  localStorage.setItem("cellarcount2026",JSON.stringify(wines));
  render();
 };
 reader.readAsText(file,"UTF-8");
}

function render(){
 const d=document.getElementById("labels");
 d.innerHTML="";
 wines.forEach(w=>{
  const box=document.createElement("div");
  box.className="label";
  box.innerHTML=`<strong>${w.name}</strong><br>
  ${w.type} ‚Äì ${w.country}<br>
  Reol ${w.reol} ¬∑ Hylde ${w.hylde}<br>`;
  const c=document.createElement("canvas");
  QRCode.toCanvas(c,w.vinId);
  box.appendChild(c);
  d.appendChild(box);
 });
}
render();
</script>

</body>
</html>
