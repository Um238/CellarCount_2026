<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CellarCount 2026 â€“ Telefon-scanning</title>
<style>
body{font-family:Arial;margin:16px}
button{padding:10px;margin:6px;font-size:16px}
#result{margin-top:12px;font-weight:bold}
</style>
<script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

<h1>ğŸ“± CellarCount 2026</h1>
<p>Scan QR-kode for at finde vin</p>

<button onclick="startScan()">Start scanning</button>
<button onclick="stopScan()">Stop</button>

<div id="reader" style="width:300px"></div>
<div id="result"></div>

<script>
let wines = JSON.parse(localStorage.getItem("cellarcount2026")||"[]");
let scanner;

function startScan(){
 document.getElementById("result").innerText="Starter kamera...";
 scanner = new Html5Qrcode("reader");
 scanner.start(
  { facingMode: "environment" },
  { fps: 10, qrbox: 250 },
  code => {
    scanner.stop();
    handleScan(code);
  }
 );
}

function stopScan(){
 if(scanner) scanner.stop();
}

function handleScan(vinId){
 const wine = wines.find(w=>w.vinId===vinId);
 if(!wine){
  document.getElementById("result").innerText =
   "âŒ Ukendt vin â€“ ikke i lager";
  return;
 }
 document.getElementById("result").innerText =
  "âœ” Fundet: "+wine.name+" ("+wine.qty+" stk)";
}
</script>

</body>
</html>
